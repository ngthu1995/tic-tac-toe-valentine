{"ast":null,"code":"import _toConsumableArray from \"/Users/thunguyen/Downloads/tic-tac-toe-valentine/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/Users/thunguyen/Downloads/tic-tac-toe-valentine/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { useState } from \"react\";\nimport { pieces } from \"../constants/action.types\";\nimport { isWinning } from \"../algorithm/main\";\nimport { valentines, news, code } from \"../questions\";\nvar usePlayers = function usePlayers() {\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    player1 = _useState2[0],\n    setPlayer1 = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    player2 = _useState4[0],\n    setPlayer2 = _useState4[1];\n  var handleNameChange = function handleNameChange(e) {\n    return function (type) {\n      if (type === 'player1') {\n        setPlayer1(e.target.value);\n      } else if (type === 'player2') {\n        setPlayer2(e.target.value);\n      }\n    };\n  };\n  return {\n    player1: player1,\n    player2: player2,\n    handleNameChange: handleNameChange\n  };\n};\nexport var usePlayerItems = function usePlayerItems(props) {\n  var _useState5 = useState([]),\n    _useState6 = _slicedToArray(_useState5, 2),\n    player1Items = _useState6[0],\n    setPlayer1Items = _useState6[1];\n  var _useState7 = useState([]),\n    _useState8 = _slicedToArray(_useState7, 2),\n    player2Items = _useState8[0],\n    setPlayer2Items = _useState8[1];\n  var handlePlayerItems = function handlePlayerItems(player, item) {\n    var fn = player === 'player1' ? setPlayer1Items : setPlayer2Items;\n    var items = player === 'player1' ? player1Items : player2Items;\n    fn([].concat(_toConsumableArray(items), [item]));\n  };\n  return {\n    player1Items: player1Items,\n    player2Items: player2Items,\n    handlePlayerItems: handlePlayerItems\n  };\n};\nexport var useHomePage = function useHomePage() {\n  var _useState9 = useState(null),\n    _useState10 = _slicedToArray(_useState9, 2),\n    numberCell = _useState10[0],\n    setNumberCell = _useState10[1];\n  var _useState11 = useState(null),\n    _useState12 = _slicedToArray(_useState11, 2),\n    arrayBoard = _useState12[0],\n    setArrayBoard = _useState12[1];\n  var _useState13 = useState(pieces.X),\n    _useState14 = _slicedToArray(_useState13, 2),\n    currentPiece = _useState14[0],\n    setCurrentPiece = _useState14[1];\n  var _useState15 = useState({\n      open: false,\n      title: '',\n      content: '',\n      currentPlayer: currentPlayer\n    }),\n    _useState16 = _slicedToArray(_useState15, 2),\n    dialogState = _useState16[0],\n    setDialogState = _useState16[1];\n  var _usePlayers = usePlayers(),\n    player1 = _usePlayers.player1,\n    player2 = _usePlayers.player2,\n    handleNameChange = _usePlayers.handleNameChange;\n  var onSetNumberCell = function onSetNumberCell(numberCell) {\n    setNumberCell(parseInt(numberCell));\n  };\n  var onInitArray = function onInitArray(arrayBoard) {\n    setArrayBoard(arrayBoard);\n  };\n  var onTick = function onTick(array_new) {\n    setArrayBoard(array_new);\n  };\n  var onSwitchPiece = function onSwitchPiece(data) {\n    setCurrentPiece(data);\n  };\n  var _useState17 = useState(0),\n    _useState18 = _slicedToArray(_useState17, 2),\n    count = _useState18[0],\n    setCount = _useState18[1];\n  var _useState19 = useState(-1),\n    _useState20 = _slicedToArray(_useState19, 2),\n    isWin = _useState20[0],\n    setWin = _useState20[1];\n  var _useState21 = useState(null),\n    _useState22 = _slicedToArray(_useState21, 2),\n    piecesWin = _useState22[0],\n    setPiecesWin = _useState22[1];\n  var handleDialog = function handleDialog(_ref) {\n    var open = _ref.open,\n      title = _ref.title,\n      currentPlayer = _ref.currentPlayer;\n    var list = [].concat(_toConsumableArray(valentines), _toConsumableArray(news), _toConsumableArray(code));\n    var item = list[list.length * Math.random() | 0];\n    var content = item.question;\n    var answer = item.answer;\n    setDialogState({\n      open: open,\n      content: content,\n      title: title,\n      answer: answer,\n      currentPlayer: currentPlayer\n    });\n  };\n  var tick = function tick(row, col) {\n    if (isWin === 1) {\n      return;\n    }\n    var count_tmp = count + 1;\n    setCount(count_tmp);\n\n    // update board \n    var newArray = _toConsumableArray(arrayBoard);\n    newArray[row][col] = currentPiece;\n    onTick(newArray);\n\n    // check win \n    var updatedPiecesWin = isWinning(newArray, row, col, currentPiece);\n    if (updatedPiecesWin.length > 0) {\n      setWin(1);\n      setPiecesWin(updatedPiecesWin);\n    } else if (count_tmp === numberCell * numberCell) {\n      setWin(0);\n    } else {\n      // switch player\n      onSwitchPiece(currentPiece === pieces.X ? pieces.O : pieces.X);\n      var _currentPlayer = currentPiece === pieces.X ? 'Player 1' : 'Player 2';\n      var title = \"\".concat(_currentPlayer, \"'s turn\");\n      handleDialog({\n        open: true,\n        title: title,\n        currentPlayer: currentPiece\n      });\n    }\n  };\n  var resetMap = function resetMap() {\n    onInitArray(Array(numberCell).fill(null).map(function () {\n      return Array(numberCell).fill(null);\n    }));\n    onSwitchPiece(pieces.X);\n    setCount(0);\n    setWin(-1);\n    setPiecesWin(null);\n  };\n  return {\n    numberCell: numberCell,\n    currentPiece: currentPiece,\n    arrayBoard: arrayBoard,\n    onSetNumberCell: onSetNumberCell,\n    onInitArray: onInitArray,\n    onTick: onTick,\n    onSwitchPiece: onSwitchPiece,\n    tick: tick,\n    isWin: isWin,\n    piecesWin: piecesWin,\n    resetMap: resetMap,\n    handleDialog: handleDialog,\n    dialogState: dialogState,\n    player1: player1,\n    player2: player2,\n    handleNameChange: handleNameChange\n  };\n};","map":{"version":3,"names":["useState","pieces","isWinning","valentines","news","code","usePlayers","_useState","_useState2","_slicedToArray","player1","setPlayer1","_useState3","_useState4","player2","setPlayer2","handleNameChange","e","type","target","value","usePlayerItems","props","_useState5","_useState6","player1Items","setPlayer1Items","_useState7","_useState8","player2Items","setPlayer2Items","handlePlayerItems","player","item","fn","items","concat","_toConsumableArray","useHomePage","_useState9","_useState10","numberCell","setNumberCell","_useState11","_useState12","arrayBoard","setArrayBoard","_useState13","X","_useState14","currentPiece","setCurrentPiece","_useState15","open","title","content","currentPlayer","_useState16","dialogState","setDialogState","_usePlayers","onSetNumberCell","parseInt","onInitArray","onTick","array_new","onSwitchPiece","data","_useState17","_useState18","count","setCount","_useState19","_useState20","isWin","setWin","_useState21","_useState22","piecesWin","setPiecesWin","handleDialog","_ref","list","length","Math","random","question","answer","tick","row","col","count_tmp","newArray","updatedPiecesWin","O","resetMap","Array","fill","map"],"sources":["/Users/thunguyen/Downloads/tic-tac-toe-valentine/src/hooks/index.js"],"sourcesContent":["import { useState } from \"react\";\nimport { pieces } from \"../constants/action.types\";\nimport { isWinning } from \"../algorithm/main\";\nimport { valentines, news, code } from \"../questions\";\n\nconst usePlayers = () => {\n  const [player1, setPlayer1] = useState('')\n  const [player2, setPlayer2] = useState('')\n  const handleNameChange = (e) => type => {\n    if (type === 'player1'){\n      setPlayer1(e.target.value)\n    } else if (type === 'player2'){\n      setPlayer2(e.target.value)\n    }\n  }\n  return {\n    player1,\n    player2,\n    handleNameChange\n  }\n}\n\nexport const usePlayerItems = (props) => {\n  const [player1Items, setPlayer1Items] = useState([])\n  const [player2Items, setPlayer2Items] = useState([])\n\n  const handlePlayerItems = (player, item) => {\n    const fn = player === 'player1' ? setPlayer1Items : setPlayer2Items\n    const items = player === 'player1' ? player1Items : player2Items\n\n    fn([...items, item])\n  } \n\n  return {\n    player1Items,\n    player2Items,\n    handlePlayerItems\n  }\n}\n\nexport const useHomePage = () => {\n  const [numberCell, setNumberCell] = useState(null)\n  const [arrayBoard, setArrayBoard] = useState(null)\n  const [currentPiece, setCurrentPiece] = useState(pieces.X)\n  const [dialogState, setDialogState] = useState({\n    open: false,\n    title: '',\n    content: '',\n    currentPlayer\n  })\n\n  const {\n    player1,\n    player2,\n    handleNameChange\n  } = usePlayers()\n  const onSetNumberCell = numberCell => {\n    setNumberCell(parseInt(numberCell))\n  }\n\nconst onInitArray = arrayBoard => {\n  setArrayBoard(arrayBoard)\n}\n\nconst onTick =  (array_new) => {\n  setArrayBoard(array_new)\n}\n\nconst onSwitchPiece = (data) => {\n  setCurrentPiece(data)\n}\n\nconst [count, setCount] = useState(0)\n  const [isWin, setWin] = useState(-1)\n  const [piecesWin, setPiecesWin] = useState(null)\n  \n  const handleDialog = ({open, title, currentPlayer}) => {\n    const list = [...valentines, ...news, ...code]\n    const item = list[list.length * Math.random() | 0]\n    const content = item.question\n    const answer = item.answer\n    setDialogState({open , content, title, answer, currentPlayer})\n  }\n  const tick= (row, col) => {\n    if (isWin === 1) {\n      return;\n    }\n\n    let count_tmp = count + 1;\n    setCount(count_tmp );\n\n    // update board \n    let newArray = [...arrayBoard];\n    newArray[row][col] = currentPiece;\n    onTick(newArray);\n\n    // check win \n    const updatedPiecesWin = isWinning(newArray, row, col, currentPiece);\n    if (updatedPiecesWin.length > 0) {\n      setWin(1)\n      setPiecesWin(updatedPiecesWin)\n    \n    } else if (count_tmp ===  numberCell * numberCell) {\n      setWin(0)\n    } else {\n      // switch player\n      onSwitchPiece(currentPiece === pieces.X ? pieces.O : pieces.X);\n      const currentPlayer = currentPiece === pieces.X ? 'Player 1' : 'Player 2'\n      const title = `${currentPlayer}'s turn`\n      handleDialog({open: true, title, currentPlayer: currentPiece})\n    }\n  }\n\n  const resetMap = () => {\n    onInitArray(\n      Array(numberCell)\n        .fill(null)\n        .map(() => Array(numberCell).fill(null))\n    );\n    onSwitchPiece(pieces.X);\n    setCount(0)\n    setWin(-1)\n    setPiecesWin(null)\n  }\n\n\n  \n  return {\n    numberCell,\n    currentPiece,\n    arrayBoard,\n    onSetNumberCell,\n    onInitArray,\n    onTick,\n    onSwitchPiece,\n    tick, isWin, piecesWin, resetMap,\n    handleDialog,\n    dialogState,\n    player1,\n    player2,\n    handleNameChange,\n  }\n}\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}